<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Cool Fish In Glacier</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Cool Fish In Glacier">
<meta property="og:url" content="http://cfig.github.io/page/2/index.html">
<meta property="og:site_name" content="Cool Fish In Glacier">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cool Fish In Glacier">
  
    <link rel="alternate" href="/atom.xml" title="Cool Fish In Glacier" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-67906660-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Cool Fish In Glacier</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">叽里咕噜</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://cfig.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-embed-python-script-inside-Makefile" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/27/embed-python-script-inside-Makefile/" class="article-date">
  <time datetime="2019-02-27T01:34:15.000Z" itemprop="datePublished">2019-02-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/27/embed-python-script-inside-Makefile/">embed python script inside Makefile</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Sometimes it’s necessary to embed some lines of python script inside Makefile, here is some examples:</p>
<h3 id="1-original-python-snippet"><a href="#1-original-python-snippet" class="headerlink" title="1. original python snippet:"></a>1. original python snippet:</h3><pre><code>x = &quot;2018-12-25&quot;
match = re.search(r&apos;^(\d{4})-(\d{2})-(\d{2})&apos;, x)
if match:
    y = int(match.group(1)) - 2000
    m = int(match.group(2))
    # 7 bits allocated for the year, 4 bits for the month
    assert y &gt;= 0 and y &lt; 128
    assert m &gt; 0 and m &lt;= 12
    print (y &lt;&lt; 4) | m
else:
    print (&apos;Something is wrong&apos;)
</code></pre><p>Output is:</p>
<pre><code>300
</code></pre><h3 id="2-single-line-makefile-command"><a href="#2-single-line-makefile-command" class="headerlink" title="2. single line makefile command:"></a>2. single line makefile command:</h3><p>We can use <a href="http://jagt.github.io/python-single-line-convert/" target="_blank" rel="noopener">http://jagt.github.io/python-single-line-convert/</a> to generate the 1-line command for makefiles.</p>
<pre><code>theCmd := &quot;&quot;&quot;import re\nx = &apos;2018-12-25&apos;\nmatch = re.search(r&apos;^(\\d{4})-(\\d{2})-(\\d{2})&apos;, x)\nif match:\n    y = int(match.group(1)) - 2000\n    m = int(match.group(2))\n    assert y &gt;= -1 and y &lt; 128\n    assert m &gt; 0 and m &lt;= 12\n    print (y &lt;&lt; 4) | m\nelse:\n    print (&apos;Something is wrong&apos;)\n&quot;&quot;&quot;
osPatchLvl := $(shell echo -e $(theCmd) | python)
single:
    echo $(osPatchLvl)
</code></pre><h3 id="3-multiple-line-Makefile-commands"><a href="#3-multiple-line-Makefile-commands" class="headerlink" title="3. multiple line Makefile commands:"></a>3. multiple line Makefile commands:</h3><p>Conversion tips:  </p>
<pre><code>s/^/\\n/g
s/$/&quot;/g
</code></pre><p>and make sure no misleading ‘ or “ inside each line.<br>Converted multi-line commands are:</p>
<pre><code>theCmdStr := &quot;import re&quot;
theCmdStr += &quot;\nx = &apos;2018-12-25&apos;&quot;
theCmdStr += &quot;\nmatch = re.search(r&apos;^(\d{4})-(\d{2})-(\d{2})&apos;, x)&quot;
theCmdStr += &quot;\nif match:&quot;
theCmdStr += &quot;\n    y = int(match.group(1)) - 2000&quot;
theCmdStr += &quot;\n    m = int(match.group(2))&quot;
theCmdStr += &quot;\n    assert y &gt;= 0 and y &lt; 128&quot;
theCmdStr += &quot;\n    assert m &gt; 0 and m &lt;= 12&quot;
theCmdStr += &quot;\n    print (y &lt;&lt; 4) | m&quot;
theCmdStr += &quot;\nelse:&quot;
theCmdStr += &quot;\n    print (&apos;Something is wrong&apos;)&quot;
osPatchLvl2 := $(shell echo -e $(theCmdStr) | python)
multi:
    echo $(osPatchLvl2)
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://cfig.github.io/2019/02/27/embed-python-script-inside-Makefile/" data-id="cjx5ti7dd003jmvwgkkyksnmq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-java-keystore-and-apk-signature" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/23/java-keystore-and-apk-signature/" class="article-date">
  <time datetime="2017-12-22T16:05:18.000Z" itemprop="datePublished">2017-12-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/23/java-keystore-and-apk-signature/">java keystore和apk签名</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-转换pk8到java-keystore："><a href="#1-转换pk8到java-keystore：" class="headerlink" title="1.转换pk8到java keystore："></a>1.转换pk8到java keystore：</h3><h3 id="1-1-命令行制定密码-默认密码为android"><a href="#1-1-命令行制定密码-默认密码为android" class="headerlink" title="1.1 命令行制定密码,默认密码为android"></a>1.1 命令行制定密码,默认密码为android</h3><p>把platform.pk8转换成java keystore</p>
<pre><code>openssl pkcs8 -inform DER -nocrypt -in platform.pk8 -out platform.pem
openssl pkcs12 -export -in platform.x509.pem -out platform.p12 \
    -inkey  platform.pem -password pass:android -name androiddebugkey
keytool -importkeystore -deststorepass android -destkeystore \
    ./platform.jks -srckeystore ./platform.p12 \
    -srcstoretype PKCS12 -srcstorepass android
</code></pre><h3 id="1-2-提示输入密码"><a href="#1-2-提示输入密码" class="headerlink" title="1.2 提示输入密码"></a>1.2 提示输入密码</h3><p>把platform.pk8转换成java keystore</p>
<pre><code>openssl pkcs8 -inform DER -nocrypt -in platform.pk8 -out platform.pem
</code></pre><p>alias为platform,提示输入密码</p>
<pre><code>openssl pkcs12 -export -in platform.x509.pem -out platform.p12 
    -inkey  platform.pem -name platform
</code></pre><p>提示输入密码</p>
<pre><code>keytool -importkeystore -destkeystore ./platform.jks \
    -srckeystore ./platform.p12 -srcstoretype PKCS12
</code></pre><p>###其他常用指令</p>
<p>手动生成java keystore:</p>
<pre><code>keytool  -genkeypair -keystore me.jks -alias me.jks
</code></pre><p>查看keystore内容</p>
<pre><code>keytool -list -v -keystore me.jks
</code></pre><p>给jar签名</p>
<pre><code>jarsigner -keystore me.jks -signedjar &lt;new.jar&gt; &lt;old.jar&gt; me.jks
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://cfig.github.io/2017/12/23/java-keystore-and-apk-signature/" data-id="cjx5ti7dm003zmvwgzlv8b1zs" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-compiling-opencv-for-Java" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/22/compiling-opencv-for-Java/" class="article-date">
  <time datetime="2017-12-22T15:34:12.000Z" itemprop="datePublished">2017-12-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/22/compiling-opencv-for-Java/">compiling opencv for Java</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-参考文档"><a href="#1-参考文档" class="headerlink" title="1. 参考文档"></a>1. 参考文档</h3><p>install in linux and mac<br><a href="http://docs.opencv.org/2.4/doc/tutorials/introduction/linux_install/linux_install.html" target="_blank" rel="noopener">http://docs.opencv.org/2.4/doc/tutorials/introduction/linux_install/linux_install.html</a><br>java<br><a href="http://docs.opencv.org/2.4/doc/tutorials/introduction/desktop_java/java_dev_intro.html" target="_blank" rel="noopener">http://docs.opencv.org/2.4/doc/tutorials/introduction/desktop_java/java_dev_intro.html</a><br><a href="http://docs.opencv.org/trunk/d7/d9f/tutorial_linux_install.html" target="_blank" rel="noopener">http://docs.opencv.org/trunk/d7/d9f/tutorial_linux_install.html</a></p>
<h3 id="2-linux编译要点"><a href="#2-linux编译要点" class="headerlink" title="2. linux编译要点"></a>2. linux编译要点</h3><h4 id="cmake配置"><a href="#cmake配置" class="headerlink" title="cmake配置"></a>cmake配置</h4><pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE \
    -D CMAKE_INSTALL_PREFIX=/home/yu/.programs/opencv \
    -DBUILD_SHARED_LIBS=OFF \
    BUILD_EXAMPLES=OFF \
    BUILD_TESTS=OFF \
    BUILD_PERF_TESTS=OFF ..
</code></pre><h4 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h4><pre><code>make -j32
make install
</code></pre><h4 id="为动态库配置路径"><a href="#为动态库配置路径" class="headerlink" title="为动态库配置路径"></a>为动态库配置路径</h4><p>opencv: pkg-config</p>
<pre><code>export PKG_CONFIG_PATH=/home/yu/.programs/opencv/lib/pkgconfig
</code></pre><p>opencv: dylib</p>
<pre><code>export LD_LIBRARY_PATH=/home/yu/.programs/opencv/share/OpenCV/java
</code></pre><h3 id="3-mac编译要点"><a href="#3-mac编译要点" class="headerlink" title="3. mac编译要点"></a>3. mac编译要点</h3><h4 id="cmake配置-1"><a href="#cmake配置-1" class="headerlink" title="cmake配置"></a>cmake配置</h4><pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE -D \
    CMAKE_INSTALL_PREFIX=/Users/yu/.programs/opencv/ \
    -DBUILD_SHARED_LIBS=OFF ..
</code></pre><h4 id="编译安装-1"><a href="#编译安装-1" class="headerlink" title="编译安装"></a>编译安装</h4><pre><code>make -j32
make install
</code></pre><p>安装后只有一个dylib: ./share/OpenCV/java/libopencv_java320.dylib， 其余都为.a</p>
<h4 id="配置路径"><a href="#配置路径" class="headerlink" title="配置路径"></a>配置路径</h4><p>opencv: pkg-config</p>
<pre><code>export PKG_CONFIG_PATH=/Users/yu/.programs/opencv/lib/pkgconfig/
</code></pre><p>opencv: dylib</p>
<pre><code>export DYLD_LIBRARY_PATH=/Users/yu/.programs/opencv/share/OpenCV/java
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://cfig.github.io/2017/12/22/compiling-opencv-for-Java/" data-id="cjx5ti7d80037mvwgd4m5wkjc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Bug-dev-input-eventX-事件阻碍kernel-suspend-flow" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/20/Bug-dev-input-eventX-事件阻碍kernel-suspend-flow/" class="article-date">
  <time datetime="2017-12-20T12:25:33.000Z" itemprop="datePublished">2017-12-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/20/Bug-dev-input-eventX-事件阻碍kernel-suspend-flow/">Bug: /dev/input/eventX 事件阻碍kernel suspend flow</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Bug: /dev/input/eventX 事件阻碍kernel suspend flow</p>
<h2 id="1-相关模块："><a href="#1-相关模块：" class="headerlink" title="1.相关模块："></a>1.相关模块：</h2><p>###（1） Android: InputReader</p>
<p>frameworks/native/services/inputflinger/EventHub.cpp<br>会注册epoll wakeup source,<br>epoll_ctl(/dev/input/), flag设成了EPOLLWAKEUP</p>
<p>###（2）Kernel: drivers/input/input.c</p>
<p>input_dev_suspend()-&gt; input_dev_release_keys() -&gt;<br>kernel认为：当前按着的key等resume回来之后不会继续hold住，所以要释放所有的key。(Simulate keyup events for all keys that are marked as pressed.)</p>
<h2 id="2-解决方案：kernel修复自己的bug："><a href="#2-解决方案：kernel修复自己的bug：" class="headerlink" title="2.解决方案：kernel修复自己的bug："></a>2.解决方案：kernel修复自己的bug：</h2><pre><code>commit a5f5a6880ba2645af793ddba96e95c96cac3194e
Author: Dmitry Torokhov &lt;dmitry.torokhov@gmail.com&gt;
Date:   Thu Aug 6 19:15:30 2015 -0700

    Input: do not emit unneeded EV_SYN when suspending

    backport 00159f19a5057cb779146afce1cceede692af346 upstream.

    Do not emit EV_SYN/SYN_REPORT on suspend if there were no keys that are
    still pressed as we are suspending the device (and in all other cases when
    input core is forcibly releasing keys via input_dev_release_keys() call).

    Reviewed-by: Benson Leung &lt;bleung@chromium.org&gt;
    Signed-off-by: Dmitry Torokhov &lt;dmitry.torokhov@gmail.com&gt;
</code></pre><p>改动如下</p>
<pre><code>diff --git a/drivers/input/input.c b/drivers/input/input.c
index 29ca0bb..087255a 100644
--- a/drivers/input/input.c
+++ b/drivers/input/input.c
@@ -667,6 +667,7 @@ EXPORT_SYMBOL(input_close_device);
  */
 static void input_dev_release_keys(struct input_dev *dev)
 {
+       bool need_sync = false;
        int code;

        if (is_event_supported(EV_KEY, dev-&gt;evbit, EV_MAX)) {
@@ -674,9 +675,11 @@ static void input_dev_release_keys(struct input_dev *dev)
                        if (is_event_supported(code, dev-&gt;keybit, KEY_MAX) &amp;&amp;
                            __test_and_clear_bit(code, dev-&gt;key)) {
                                input_pass_event(dev, EV_KEY, code, 0);
+                               need_sync = true;
                        }
                }
-               input_pass_event(dev, EV_SYN, SYN_REPORT, 1);
+               if (need_sync)
+                       input_pass_event(dev, EV_SYN, SYN_REPORT, 1);
        }
 }
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://cfig.github.io/2017/12/20/Bug-dev-input-eventX-事件阻碍kernel-suspend-flow/" data-id="cjx5ti7co001zmvwgb6vdtf8n" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Android-Factory-Reset-Protection-FRP" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/20/Android-Factory-Reset-Protection-FRP/" class="article-date">
  <time datetime="2017-12-20T12:08:49.000Z" itemprop="datePublished">2017-12-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/20/Android-Factory-Reset-Protection-FRP/">Android - Factory Reset Protection(FRP)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Purpose"><a href="#Purpose" class="headerlink" title="Purpose:"></a>Purpose:</h3><p>Google want to “reduce the value of a stolen device” by factory reset protection</p>
<h3 id="可选性："><a href="#可选性：" class="headerlink" title="可选性："></a>可选性：</h3><p>GMS强制要求frp，依赖于Google Play Service 6.7.x+</p>
<h3 id="如何打开该功能："><a href="#如何打开该功能：" class="headerlink" title="如何打开该功能："></a>如何打开该功能：</h3><p>当且仅且满足如下条件：</p>
<pre><code>Google Account exists on a device
OEM locked （Settings-&gt;Developer Option)
</code></pre><p>时，frp会打开。默认打开。</p>
<p>需要一个raw分区, 指定frp分区(factory reset protection)</p>
<pre><code>ro.frp.pst=/dev/block/platform/sdhci-tegra.3/by-name/PST
ro.frp.pst=/dev/block/platform/msm_sdcc.1/by-name/frp
</code></pre><p>shamu:</p>
<pre><code>PRODUCT_PROPERTY_OVERRIDES += \
    ro.frp.pst=/dev/block/platform/msm_sdcc.1/by-name/frp
</code></pre><p>大小：500K-2M<br>格式: raw<br>权限：只有指定的system进程可以访问。用overlay配置config_persistentDataPackageName, 用GMS的话就是com.google.android.gms<br>分区最后一个byte用来指定OEM lock状态。0 - locked (fastboot oem unlock执行会失败)。工厂必须默认0.</p>
<h3 id="功能："><a href="#功能：" class="headerlink" title="功能："></a>功能：</h3><ul>
<li>只要有google账户，有网络，就可以远程通过Android Device Manager(ADM)锁屏</li>
<li>frp打开后，如下操作会提示密码：在主用户上添加google账户；删除最后一个google账户</li>
<li>frp打开后，只有在Settings下做factory reset才会清除reset token，重新打开setup wizard时才不需要密码 (trusted factory reset)</li>
<li>frp打开后，bootloader下或者ADM下做factory reset不会清除reset token，重新打开setup wizard时会提示输入密码。 (untrusted factory reset), 只要输入的账户/密码符合之前任意一个google账户即可。</li>
</ul>
<h3 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h3><p>Trusted Factory Reset:指的是PersistentDataBlockService#wipe(),实际上就是ioctl(fd, BLKSECDISCARD, &amp;range)</p>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><pre><code>Platform API:存储frp数据PersistentDataBlockManager
GMS core module:在分区上写入google自己数据
</code></pre><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><ul>
<li>IPersistentDataBlockService.aidl<br>service</li>
<li>PersistentDataBlockManager.java</li>
<li>PersistentDataBlockService.java</li>
<li>com_android_server_PersistentDataBlockService.cpp</li>
</ul>
<h3 id="用户设置："><a href="#用户设置：" class="headerlink" title="用户设置："></a>用户设置：</h3><p>Setting需要如下权限：”android.permission.OEM_UNLOCK_STATE”</p>
<pre><code>D/PersistentNotificationBroadcastReceiver( 1198): Received intent: Intent { act=android.intent.action.BOOT_COMPLETED flg=0x8000010 cmp=com.google.android.gms/.common.notification.PersistentNotificationBroadcastReceiver (has extras) }
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://cfig.github.io/2017/12/20/Android-Factory-Reset-Protection-FRP/" data-id="cjx5ti7cg001jmvwgc8ew1btr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Android-BackupManager" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/20/Android-BackupManager/" class="article-date">
  <time datetime="2017-12-20T11:51:59.000Z" itemprop="datePublished">2017-12-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/20/Android-BackupManager/">Android BackupManager</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>主要源文件<br>BackupManagerService.java<br>Bmgr.java</p>
<p>配置文件指定默认transport<br>frameworks/base/packages/SettingsProvider/res/values/defaults.xml</p>
<p>gms默认配置</p>
<pre><code>&lt;string name=&quot;def_backup_transport&quot;&gt;com.google.android.backup/.BackupTransportService&lt;/string&gt;
</code></pre><p>AOSP默认配置transport: LocalTransport</p>
<pre><code>&lt;string name=&quot;def_backup_transport&quot; translatable=&quot;false&quot;&gt;android/com.android.internal.backup.LocalTransport&lt;/string&gt;
</code></pre><p>其他参考</p>
<pre><code>&lt;service
android:name=&quot;com.android.internal.backup.LocalTransportService&quot;
android:permission=&quot;android.permission.CONFIRM_FULL_BACKUP&quot;
android:exported=&quot;false&quot;&gt;

&lt;intent-filter&gt;
&lt;action android:name=&quot;android.backup.TRANSPORT_HOST&quot; /&gt;
&lt;/intent-filter&gt;
&lt;/service&gt;
</code></pre><p>BackupManagerService会从PackageManger中找到所有能接收android.backup.TRANSPORT_HOST的service,</p>
<pre><code>List&lt;ResolveInfo&gt; hosts = mPackageManager.queryIntentServicesAsUser(
mTransportServiceIntent, 0, UserHandle.USER_OWNER);
</code></pre><p>之后就可以用bmgr list transports列出</p>
<pre><code>shell@bg4ct_spruce:/ # bmgr list transports
android/com.android.internal.backup.LocalTransport
* com.google.android.gms/.backup.BackupTransportService


root@bg4ct_spruce:/ # bmgr enabled
Backup Manager currently disabled

root@bg4ct_spruce:/ # bmgr enable true
Backup Manager now enabled
</code></pre><p>切换android transport</p>
<pre><code>bmgr transport android/com.android.internal.backup.LocalTransport
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://cfig.github.io/2017/12/20/Android-BackupManager/" data-id="cjx5ti7cf001gmvwgm9f88te2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Android-Keyevent-test" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/20/Android-Keyevent-test/" class="article-date">
  <time datetime="2017-12-20T11:46:22.000Z" itemprop="datePublished">2017-12-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/20/Android-Keyevent-test/">Android Keyevent test</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>发送key (system/core/toolbox/sendevent.c)</p>
<p>发送长按POWER键:(long press)</p>
<pre><code>input keyevent --longpress POWER
</code></pre><p>or</p>
<pre><code>sendevent /dev/input/event0 1 116 1
sendevent /dev/input/event0 0 0 0
sleep 1
sendevent /dev/input/event0 1 116 0
sendevent /dev/input/event0 0 0 0
sleep 1
</code></pre><p>KEY_DOWN</p>
<pre><code>sendevent /dev/input/event0 1 108 1
sendevent /dev/input/event0 0 0 0
sendevent /dev/input/event0 1 108 0
sendevent /dev/input/event0 0 0 0
</code></pre><p>KEY_UP</p>
<pre><code>sendevent /dev/input/event0 1 103 1
sendevent /dev/input/event0 0 0 0
sendevent /dev/input/event0 1 103 0
sendevent /dev/input/event0 0 0 0
</code></pre><p>发送Power+KeyUp，切换RecoveryUI</p>
<pre><code>sendevent /dev/input/event0 1 116 1
sendevent /dev/input/event0 0 0 0
sendevent /dev/input/event0 1 115 1
sendevent /dev/input/event0 0 0 0
sendevent /dev/input/event0 1 115 0
sendevent /dev/input/event0 0 0 0
sendevent /dev/input/event0 1 116 0
sendevent /dev/input/event0 0 0 0
</code></pre><p>读取keyevent:</p>
<pre><code>getevent
[    1688.811239] /dev/input/event1: 0004 0004 0007004f
[    1688.811239] /dev/input/event1: 0001 006a 00000001
[    1688.811239] /dev/input/event1: 0000 0000 00000000

[    1688.827260] /dev/input/event1: 0004 0004 0007004f
[    1688.827260] /dev/input/event1: 0001 006a 00000000
[    1688.827260] /dev/input/event1: 0000 0000 00000000
</code></pre><p>InputDispatcherThread</p>
<pre><code>InputDispatcherThread::threadLoop()
- InputDispatcher::dispatchOnce()
- - InputDispatcher::dispatchOnceInnerLocked()
- - - InputDispatcher::dispatchKeyLocked()
- - - - - InputDispatcher::doInterceptKeyBeforeDispatchingLockedInterruptible()
- - - - - - mPolicy-&gt;interceptKeyBeforeDispatching()
</code></pre><p>按键输入</p>
<pre><code>KeyboardInputMapper::processKey()
- QueuedInputListener::flush()
- - NotifyKeyArgs::notify()
- - - QueuedInputListener::notifyKey()
InputDispatcher::notifyKey()
- mPolicy-&gt;interceptKeyBeforeQueueing()
</code></pre><p>CLI输入</p>
<pre><code>(java)InputManagerService.injectInputEvent()
- (java)InputManagerService.injectInputEventInternal()
- - (java/c)nativeInjectInputEvent()
- - - (c)InputDispatcher::injectInputEvent()
- - - - (c/java)mPolicy-&gt;interceptKeyBeforeQueueing()
</code></pre><p>input flinger测试代码<br>frameworks/native/services/inputflinger/tests</p>
<p>java input keyevent: jni<br>frameworks/base/services/core/jni/com_android_server_input_InputManagerService.cpp<br>调用(jint) im-&gt;getInputManager()-&gt;getDispatcher()-&gt;injectInputEvent()<br>实现于<br>frameworks/native/services/inputflinger/InputDispatcher.cpp<br>打包于<br>libinputflinger.so</p>
<p>KeyEvent.java定义了keycode，键码<br>linux/include/uapi/linux/input.h定义了sendevent中的键值</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cfig.github.io/2017/12/20/Android-Keyevent-test/" data-id="cjx5ti7ch001lmvwg6d3unm4c" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Trouble-Shooting-statvfs-too-slow" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/20/Trouble-Shooting-statvfs-too-slow/" class="article-date">
  <time datetime="2017-12-20T11:32:34.000Z" itemprop="datePublished">2017-12-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/20/Trouble-Shooting-statvfs-too-slow/">Trouble Shooting - statvfs() too slow</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Android-Issue-statvfs-too-slow"><a href="#Android-Issue-statvfs-too-slow" class="headerlink" title="Android Issue: statvfs() too slow"></a>Android Issue: statvfs() too slow</h3><p>statvfs() takes too much time if newly inserted USB disk (vfat) is very large</p>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>add “usefree” flag</p>
<pre><code>diff --git a/fs/Vfat.cpp b/fs/Vfat.cpp
index 38681c9..04e9a1d 100644
--- a/fs/Vfat.cpp
+++ b/fs/Vfat.cpp
@@ -140,7 +140,7 @@ status_t Mount(const std::string&amp; source, const std::string&amp; target, bool ro,
     flags |= (remount ? MS_REMOUNT : 0);
     sprintf(mountData,
-            &quot;utf8,uid=%d,gid=%d,fmask=%o,dmask=%o,shortname=mixed&quot;,
+            &quot;utf8,uid=%d,gid=%d,fmask=%o,dmask=%o,shortname=mixed,usefree&quot;,
             ownerUid, ownerGid, permMask, permMask);
     rc = mount(c_source, c_target, &quot;vfat&quot;, flags, mountData);
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://cfig.github.io/2017/12/20/Trouble-Shooting-statvfs-too-slow/" data-id="cjx5ti7cz002omvwgx1lesn4e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Build-AOSP-image-for-Nexus-Player" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/20/Build-AOSP-image-for-Nexus-Player/" class="article-date">
  <time datetime="2017-12-20T10:39:32.000Z" itemprop="datePublished">2017-12-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/20/Build-AOSP-image-for-Nexus-Player/">Build AOSP image for Nexus Player</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="How-to-build-AOSP-images-for-Nexus-Player-fugu"><a href="#How-to-build-AOSP-images-for-Nexus-Player-fugu" class="headerlink" title="How to build AOSP images for Nexus Player(fugu)"></a>How to build AOSP images for Nexus Player(fugu)</h1><h2 id="0-Preface"><a href="#0-Preface" class="headerlink" title="0. Preface"></a>0. Preface</h2><p>Be sure to read <a href="https://developers.google.com/android/images" target="_blank" rel="noopener">https://developers.google.com/android/images</a> thoroughly to get a basic knowledge of Android factory images and flashing tools.</p>
<h2 id="1-Download-AOSP-code"><a href="#1-Download-AOSP-code" class="headerlink" title="1. Download AOSP code"></a>1. Download AOSP code</h2><pre><code>repo init -u https://android.googlesource.com/platform/manifest -b android-8.0.0_r12
repo sync
</code></pre><h2 id="2-Download-fw-drivers"><a href="#2-Download-fw-drivers" class="headerlink" title="2. Download fw/drivers"></a>2. Download fw/drivers</h2><p>Go to <a href="https://developers.google.com/android/drivers" target="_blank" rel="noopener">https://developers.google.com/android/drivers</a> and  search for Nexus Player (“fugu”) section. Download all fufu related firmware.</p>
<h2 id="3-Merge-code-and-prebuilt-fw"><a href="#3-Merge-code-and-prebuilt-fw" class="headerlink" title="3. Merge code and prebuilt fw"></a>3. Merge code and prebuilt fw</h2><p>Unzip the downloaded fw in previous section, and run the embedded script. Please put the extracted files under vendor/asus, vendor/broadcom etc.<br>Please be noted that you must “Accept” the license when running the embedded script.</p>
<h2 id="4-Build-images"><a href="#4-Build-images" class="headerlink" title="4. Build images"></a>4. Build images</h2><p>Go to Android code root, do envsetup, then:</p>
<pre><code>lunch aosp_fugu-userdebug
make dist -j32
</code></pre><h2 id="5-flash-images"><a href="#5-flash-images" class="headerlink" title="5. flash images"></a>5. flash images</h2><p>You can get factory images and OTA packages, you can then flash them to the target platform just as what you have done on our Berlin platforms.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cfig.github.io/2017/12/20/Build-AOSP-image-for-Nexus-Player/" data-id="cjx5ti7cp0021mvwguq7mcruv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-GPG-with-Yubikey-4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/08/GPG-with-Yubikey-4/" class="article-date">
  <time datetime="2017-12-08T09:13:25.000Z" itemprop="datePublished">2017-12-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/08/GPG-with-Yubikey-4/">GPG with Yubikey 4</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="0-Pre"><a href="#0-Pre" class="headerlink" title="0. Pre"></a>0. Pre</h2><p>Before you proceed, make sure you fully understand following jargons: open GPG, GPG master key and sub keys, Yubi Key by Yubico.<br>Reference info can be found at:</p>
<p><a href="http://cfig.github.io/2015/09/22/GPG-usage/">http://cfig.github.io/2015/09/22/GPG-usage/</a> describes basic operations of GPG<br><a href="https://www.yubico.com/product/yubikey-4-black-and-white-bundle" target="_blank" rel="noopener">Yubikey 4</a>, which can be bought at Amazon.<br>Others: <a href="https://lmy441900.github.io/security/yubikey/2016/09/10/about-yubikey-4.html" target="_blank" rel="noopener">https://lmy441900.github.io/security/yubikey/2016/09/10/about-yubikey-4.html</a></p>
<p>This guide has been tested on Debian(Jessie).</p>
<h2 id="1-Set-up-Yubikey4-env-for-Debian"><a href="#1-Set-up-Yubikey4-env-for-Debian" class="headerlink" title="1. Set up Yubikey4 env for Debian"></a>1. Set up Yubikey4 env for Debian</h2><p>First, please read <a href="https://wiki.debian.org/Smartcards/YubiKey4" target="_blank" rel="noopener">https://wiki.debian.org/Smartcards/YubiKey4</a> carefully.</p>
<pre><code># apt-get install scdaemon gnupg2 dirmngr
</code></pre><p>We need to enable normal user(not only root!) to use YubiKey4 on Debian by adding udev rules as <strong>/etc/udev/rules.d/99-yubikeys.rules</strong></p>
<pre><code># YubiKey 4 OTP+U2F+CCID
SUBSYSTEMS==&quot;usb&quot;, ATTRS{idVendor}==&quot;1050&quot;, ATTRS{idProduct}==&quot;0407&quot;, GROUP=&quot;plugdev&quot;, TAG+=&quot;uaccess&quot;
</code></pre><p>Then reboot system to let it take effect. Verify smart card status:</p>
<pre><code>$ gpg2 --card-status
</code></pre><h2 id="2-Move-sign-encrypt-authenticate-subkeys-to-smartcard"><a href="#2-Move-sign-encrypt-authenticate-subkeys-to-smartcard" class="headerlink" title="2. Move sign/encrypt/authenticate subkeys to smartcard"></a>2. Move sign/encrypt/authenticate subkeys to smartcard</h2><p>What we should work on is always subkey. Master key is always stored at some safe airgapped media.<br>Assuming you have sign/encrypt/authenticate private subkeys locally.</p>
<pre><code>$ gpg2 --edit-key $KEYID
$ toggle
gpg&gt; key 1
gpg&gt; keytocard
</code></pre><p>Finally verify the smart card status as:</p>
<pre><code>$ gpg2 --card-status
</code></pre><p>We can see “Signature key”, “Encryption key”, “Authentication key” should have valid values.</p>
<h2 id="3-Set-up-misc-values-for-Yubikey4"><a href="#3-Set-up-misc-values-for-Yubikey4" class="headerlink" title="3. Set up misc values for Yubikey4"></a>3. Set up misc values for Yubikey4</h2><p>After we push pubkey to server like this, </p>
<pre><code>gpg --keyserver hkp://pgp.mit.edu --send-keys 1370401F
</code></pre><p>We can search our keys at:</p>
<pre><code>http://pgp.mit.edu/pks/lookup?op=get&amp;search=0xD6F140FF1370401F
</code></pre><p>Then we should edit our Yubikey4 as:</p>
<pre><code>$ gpg2 --card-edit
admin
url
http://pgp.mit.edu/pks/lookup?op=get&amp;search=0xD6F140FF1370401F
quit
</code></pre><h2 id="4-Try-out-Yubikey4-on-another-machine"><a href="#4-Try-out-Yubikey4-on-another-machine" class="headerlink" title="4. Try out Yubikey4 on another machine:"></a>4. Try out Yubikey4 on another machine:</h2><p>Or if you are using the same machine for testing, you can delete all pub/priv keys manually before testing.</p>
<h5 id="get-pubkey-from-server"><a href="#get-pubkey-from-server" class="headerlink" title="get pubkey from server"></a>get pubkey from server</h5><pre><code>gpg2 --card-edit
fetch
quit
</code></pre><h5 id="get-private-key-stub"><a href="#get-private-key-stub" class="headerlink" title="get private key stub"></a>get private key stub</h5><pre><code>gpg2 --card-status
</code></pre><h5 id="Verify-key-status"><a href="#Verify-key-status" class="headerlink" title="Verify key status"></a>Verify key status</h5><pre><code>gpg2 -K
gpg2 -k
</code></pre><h2 id="5-Using-GPG-for-SSH-login"><a href="#5-Using-GPG-for-SSH-login" class="headerlink" title="5. Using GPG for SSH login"></a>5. Using GPG for SSH login</h2><p>I am using GnuPG 2.1.<br>Generate gpg-agent config</p>
<pre><code>echo enable-ssh-support &gt; ~/.gnupg/gpg-agent.conf
</code></pre><p>Add this to .bashrc, which will tell ssh to ask for gpg-agent:</p>
<pre><code>#GPG
export GPG_TTY=&quot;$(tty)&quot;
export SSH_AUTH_SOCK=$(gpgconf --list-dirs agent-ssh-socket)
gpg-connect-agent updatestartuptty /bye
#GPG - END
</code></pre><p>Logout and login, check status:</p>
<pre><code>ssh-add -l
ssh-add -L
</code></pre><p>Copy and paste the key to remote .ssh/authorized_keys<br>Then have a try with ‘ssh <hostname>‘.</hostname></p>
<h2 id="6-misc-references"><a href="#6-misc-references" class="headerlink" title="6. misc references"></a>6. misc references</h2><p><a href="https://demo.yubico.com/u2f.php" target="_blank" rel="noopener">https://demo.yubico.com/u2f.php</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cfig.github.io/2017/12/08/GPG-with-Yubikey-4/" data-id="cjx5ti7cr0027mvwg436dvkr3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/3/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/code/">code</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/health/">health</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/misc/">misc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/net-travel/">net travel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/android/" style="font-size: 20px;">android</a> <a href="/tags/code/" style="font-size: 12.86px;">code</a> <a href="/tags/health/" style="font-size: 10px;">health</a> <a href="/tags/java/" style="font-size: 17.14px;">java</a> <a href="/tags/linux/" style="font-size: 18.57px;">linux</a> <a href="/tags/misc/" style="font-size: 11.43px;">misc</a> <a href="/tags/net-travel/" style="font-size: 14.29px;">net travel</a> <a href="/tags/web/" style="font-size: 15.71px;">web</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/06/21/Android-boot-animation/">Make your own Android boot animation</a>
          </li>
        
          <li>
            <a href="/2019/06/06/verified-assembled-manifest/">VINTF: verified assembled manifest</a>
          </li>
        
          <li>
            <a href="/2019/06/05/compatibility-matrix/">VINTF - compatibility matrix</a>
          </li>
        
          <li>
            <a href="/2019/06/05/VINTF-manifest-xml/">VINTF: manifest.xml</a>
          </li>
        
          <li>
            <a href="/2019/05/24/Linux-capability-tests/">Linux capability tests</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 cfig
      <br><br>
      Enjoy your journey here<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>